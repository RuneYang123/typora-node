### 一、数仓建模

数据模型的意义就是将数据有序的组织和存储起来。之后才能高性能，低成本，高效率，高质量的运用。

#### 1、建模方法论

ER模型是数据仓库之父（Bill Inmon）倡导的一种建模理论。

维度模型是Ralph Kimball建立倡导的，更适合数据使用分析，目前大多数数据模型都是维度建模。

##### ER模型

从全企业的高度，抽象成关系，用实体关系（ER）模型来描述企业业务，用规范化的方式表现出来，再范式理论上符合3NF。

这种建模方式的出发点是整合数据，目的是将整个企业的数据进行组合合并，再进行规范处理，减少数据冗余，保证数据一致性，并不能用于分析统计。

**实体关系**：实体表示一个对象，关系是指两个实体之间的关系，比方说学生和班级的从属关系。可以一对多，一对一，多对一。

**数据卡规范化**：使用一系列范式设计数据库的过程，目的是减少数据冗余，增强数据的一致性。

##### 维度建模

将复杂的业务通过事实和维度两个概念进行呈现。事实通常对应业务过程，而维度对应的是业务过程时所处的环境。

事实表和维度表是存在关联关系的。事实表存一个业务发生的业务信息。

从数据分析作为出发点，为数据分析服务。 

#### 2、维度建模模型详解

##### **事实表**

事实表作为数据仓库维度建模的核心，围绕业务过程来设计。其包含改业务过程有关的维度引用（维度表外键）以及该业务过程的度量。

**事务型事实表**

事务事实表用来记录各业务过程，他保存的时各业务过程的原子操作事件，即最细粒度的操作事件。（粒度是指一行数据所表达的业务细节程度）。

**设计流程**

选择业务过程 ——》声明粒度——》确认维度——》确认事实

 **周期性快照事实表**

具有规律性、可预见的时间间隔来记录事实，主要分析一些存量型或者状态类指标。粒度可由采样周期和维度描述，确认采样周期和维度后确定粒度。

##### 维度表

时维度建模的基础，事务表积极围绕业务过程进行设计。
